{"version":3,"sources":["services/requests.js","GlobalStyle.js","components/PostCodeForm.js","components/charts/PieChart.js","components/charts/Table.js","components/layout/DataContainer.js","components/energy-data/EnergyData.js","components/utils/Loader.js","components/charts/BarChart.js","components/pollution-data/PollutionData.js","App.js","index.js"],"names":["fetchLocationData","postcode","a","formattedPostcode","replace","axios","get","res","data","result","admin_district","outcode","latitude","longitude","fetchEnergeyData","date","Date","toISOString","console","log","services","fetchPollutionData","lat","long","list","GlobalStyle","createGlobalStyle","postcodeTest","FormWrapper","styled","div","props","style","top","fontSize","width","SubmitBtn","button","PostcodeInput","input","PostCodeForm","setLocationData","setSubmitted","inputRef","useRef","useState","error","setError","setPostcode","formStyle","setFormStyle","useEffect","current","focus","handleSubmit","e","preventDefault","test","display","justifyContent","onSubmit","autoComplete","ref","aria-label","type","name","placeholder","value","onChange","target","toUpperCase","handleChange","textAlign","PieChart","chartColours","canvasRef","ctx","getContext","generatePie","clearCanvas","accum","forEach","obj","drawSlice","radians","arcStart","label","canvas","centerX","centerY","height","radius","arcEnd","beginPath","moveTo","arc","closePath","fillStyle","fill","midPoint","labelPos","labelX","Math","cos","labelY","sin","font","fontWeight","fillText","clearRect","Table","headings","isMobile","useMediaQuery","maxWidth","gridTemplateColumns","margin","map","capitalize","DataContainer","children","flexDirection","alignItems","biomass","solar","wind","hydro","coal","nuclear","imports","gas","other","enterRight","keyframes","EnergyWrapper","section","EnergyData","chartData","useCallback","filteredData","generationmix","filter","perc","total","reduce","count","fuel","PI","tableData","sort","b","intensity","forecast","index","loading","LoaderWidget1","LoaderWidget2","Loader","position","bottom","left","transform","marginTop","BarChart","colours","LABEL_PADDING","generateChart","chartWidth","length","chartHeight","strokeStyle","lineTo","stroke","i","round","valueY","BAR_GAP","drawBar","BAR_WIDTH","barHeight","rectX","rectY","fillRect","barColours","no","no2","o3","so2","pm2_5","pm10","nh3","airIndex","1","2","3","4","5","pollutantIndex","co","enterLeft","PollutionWrapper","PollutionData","Object","keys","components","key","entries","pollutant","main","aqi","App","setLoading","submitted","energyData","setEnergyData","pollutionData","setPollutionData","locationData","fetchData","Promise","all","pollutionRes","energyRes","marginLeft","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aaec67bc.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst fetchLocationData = async (postcode) => {\n  try {\n    const formattedPostcode = postcode.replace(/\\s/g, \"\");\n\n    const res = await axios.get(\n      `https://api.postcodes.io/postcodes/${formattedPostcode}`\n    );\n\n    const { admin_district, outcode, latitude, longitude } = res.data.result;\n\n    return {\n      admin_district,\n      outcode,\n      latitude,\n      longitude,\n    };\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst fetchEnergeyData = async (outcode) => {\n  try {\n    const date = new Date().toISOString();\n\n    const res = await axios.get(\n      `https://api.carbonintensity.org.uk/regional/intensity/${date}/fw48h/postcode/${outcode}`\n    );\n\n    console.log(res.data.data.data[0]);\n\n    return res.data.data.data[0];\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst fetchPollutionData = async (lat, long) => {\n  try {\n    const res = await axios.get(\n      `https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${long}&appid=3d1641233d5dc6224b739cf77d08866e`\n    );\n\n    return res.data.list[0];\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst services = { fetchLocationData, fetchPollutionData, fetchEnergeyData };\n\nexport default services;\n","import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  body {\n    background: #3d71a0;\n    font-family: 'Inder', sans-serif;\n    color: #fff;\n  }\n\n  h2 {\n    font-size: 2rem;\n  }\n\n  h3 {\n    font-size: 1.5rem;\n  }\n\n  h4 {\n    font-size: 1.4rem;\n    font-weight: 500;\n  }\n\n  * {\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n  }\n`;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport services from \"../services/requests\";\n\nconst postcodeTest = /^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z]))))\\s?[0-9][A-Za-z]{2})$/;\n\nconst FormWrapper = styled.div`\n  position: absolute;\n  top: ${(props) => props.style.top};\n  left: 50%;\n  font-size: ${(props) => props.style.fontSize};\n  width: ${(props) => props.style.width};\n  transform: translate(-50%);\n  transition: 1s;\n`;\n\nconst SubmitBtn = styled.button`\n  border: none;\n  background-color: #00abff;\n  color: #fff;\n  padding: 0.3em 0.5em;\n  cursor: pointer;\n  border-radius: 0 35px 35px 0;\n  font-size: 0.8em;\n`;\n\nconst PostcodeInput = styled.input`\n  border-radius: 0;\n  border: none;\n  padding: 0.6rem 1.6rem;\n  font-size: 1.1em;\n  border-radius: 35px 0 0 35px;\n  width: 100%;\n  color: #5c5c5c;\n  caret-color: #8f8f8f;\n`;\n\nconst PostCodeForm = ({ setLocationData, setSubmitted }) => {\n  const inputRef = useRef(null);\n  const [error, setError] = useState(\"\");\n  const [postcode, setPostcode] = useState(\"\");\n  const [formStyle, setFormStyle] = useState({\n    top: \"40%\",\n    fontSize: \"1.8rem\",\n    width: \"200px\",\n  });\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  const handleChange = (e) => {\n    setPostcode(e.target.value.toUpperCase());\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (!postcodeTest.test(postcode)) {\n        throw \"Please enter a full, valid UK postcode\";\n      }\n\n      const data = await services.fetchLocationData(postcode);\n\n      setError(\"\");\n      setFormStyle({ top: \"40px\", fontSize: \"1.5rem\", width: \"150px\" });\n      setLocationData(data);\n      setSubmitted(true);\n    } catch (err) {\n      console.error(err);\n      setError(err);\n    }\n  };\n\n  return (\n    <FormWrapper style={formStyle}>\n      <form\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n        }}\n        onSubmit={(e) => handleSubmit(e)}\n        autoComplete=\"off\"\n      >\n        <PostcodeInput\n          ref={inputRef}\n          aria-label=\"post-code\"\n          type=\"text\"\n          name=\"postCode\"\n          placeholder=\"Postcode\"\n          value={postcode}\n          onChange={(e) => handleChange(e)}\n        ></PostcodeInput>\n        <SubmitBtn>Submit</SubmitBtn>\n      </form>\n      <p style={{ fontSize: \".6em\", textAlign: \"center\" }}>{error}</p>\n    </FormWrapper>\n  );\n};\n\nexport default PostCodeForm;\n","import React, { useEffect, useRef } from \"react\";\n\nconst PieChart = ({ data, chartColours }) => {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext(\"2d\");\n    generatePie(ctx);\n  }, [data]);\n\n  const generatePie = (ctx) => {\n    clearCanvas(ctx);\n\n    let accum = 0;\n    data.forEach((obj) => {\n      drawSlice(ctx, accum, obj);\n      accum += obj.radians;\n    });\n  };\n\n  const drawSlice = (ctx, arcStart, obj) => {\n    // Draw arcs\n    const { label, value, radians } = obj;\n    const canvas = canvasRef.current;\n    const [centerX, centerY] = [canvas.width / 2, canvas.height / 2];\n    const radius = (canvas.height / 2) * 0.75;\n    const arcEnd = arcStart + radians;\n\n    ctx.beginPath();\n    ctx.moveTo(centerX, centerY);\n    ctx.arc(centerX, centerY, radius, arcStart, arcEnd, false);\n    ctx.closePath();\n    ctx.fillStyle = chartColours[label];\n    ctx.fill();\n\n    // Draw labels\n    const midPoint = arcStart + (arcEnd - arcStart) / 2;\n    const labelPos = radius * 1.1;\n    const labelX = centerX + labelPos * Math.cos(midPoint);\n    const labelY = centerY + labelPos * Math.sin(midPoint);\n\n    ctx.font = \".9rem arial\";\n    ctx.fontWeight = \"400\";\n    ctx.fillStyle = \"#fff\";\n    ctx.textAlign = labelX < centerX ? \"right\" : \"left\";\n    ctx.fillText(`${label}: ${value}%`, labelX, labelY);\n  };\n\n  const clearCanvas = (ctx) => {\n    const canvas = canvasRef.current;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  return (\n    <div>\n      <canvas ref={canvasRef} width=\"520\" height=\"400\"></canvas>\n    </div>\n  );\n};\n\nexport default PieChart;\n","import React, { Fragment } from \"react\";\nimport { capitalize } from \"lodash\";\nimport { useMediaQuery } from \"react-responsive\";\n\nconst Table = ({ data, headings }) => {\n  const isMobile = useMediaQuery({ maxWidth: 800 });\n  return (\n    <div\n      style={{\n        display: \"grid\",\n        gridTemplateColumns: \"1fr 1fr\",\n        width: isMobile ? \"80%\" : \"30%\",\n        margin: \"0 .5rem\",\n      }}\n    >\n      <div>\n        <h4>{headings[0]}</h4>\n      </div>\n      <div style={{ textAlign: \"right\" }}>\n        <h4>{headings[1]}</h4>\n      </div>\n      {data.map((value) => (\n        <Fragment>\n          <div>{capitalize(value[0])}</div>\n          <div style={{ textAlign: \"right\" }}>{value[1]}</div>\n        </Fragment>\n      ))}\n    </div>\n  );\n};\n\nexport default Table;\n","import React from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\n\nconst DataContainer = ({ children }) => {\n  const isMobile = useMediaQuery({ maxWidth: 800 });\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: isMobile ? \"column\" : \"row\",\n        justifyContent: isMobile ? \"center\" : \"space-between\",\n        alignItems: isMobile ? \"center\" : \"stretch\",\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default DataContainer;\n","import React, { useCallback } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport PieChart from \"../charts/PieChart\";\nimport Table from \"../charts/Table\";\nimport DataContainer from \"../layout/DataContainer\";\n\nconst chartColours = {\n  biomass: \"#79db88\",\n  solar: \"#ffb555\",\n  wind: \"#a8d6ff\",\n  hydro: \"#00abff\",\n  coal: \"#443636\",\n  nuclear: \"#5de6c6\",\n  imports: \"#e65d5d\",\n  gas: \"#8d7cdf\",\n  other: \"#eb2bee\",\n};\n\nconst enterRight = keyframes`\n  0% {margin-left: -100vw;}\n  100% {margin: 0;} \n`;\n\nconst EnergyWrapper = styled.section`\n  border-top: 1px solid #fff;\n  padding: 0.5rem 0;\n  animation: ${enterRight};\n  animation-duration: 0.5s;\n  animation-iteration-count: 1;\n  animation-timing-function: ease;\n`;\n\nconst EnergyData = ({ data }) => {\n  const chartData = useCallback(() => {\n    const filteredData = data.generationmix.filter((obj) => obj.perc > 0.5);\n    const total = filteredData.reduce((count, obj) => count + obj.perc, 0);\n    const formattedData = filteredData.map((obj) => {\n      return {\n        value: obj.perc,\n        label: obj.fuel,\n        radians: (obj.perc / total) * (Math.PI * 2),\n      };\n    });\n    return formattedData;\n  }, [data]);\n\n  const tableData = useCallback(() => {\n    return data.generationmix\n      .sort((a, b) => a.perc < b.perc)\n      .map((fuel) => [fuel.fuel, fuel.perc]);\n  }, [data]);\n\n  return (\n    <EnergyWrapper>\n      <header style={{ textAlign: \"center\" }}>\n        <h3>Energy Overview</h3>\n        <p>\n          Carbon Intensity:{\" \"}\n          {`${data.intensity.forecast} (${data.intensity.index})`}\n        </p>\n      </header>\n      <DataContainer>\n        <Table headings={[\"Fuel source\", \"%\"]} data={tableData()} />\n        <PieChart data={chartData()} chartColours={chartColours} />\n      </DataContainer>\n    </EnergyWrapper>\n  );\n};\n\nexport default EnergyData;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst loading = keyframes`\n  0% {left: 50%; top: 0px; border-radius: 50% 50% 50% 0;}\n  25% {left: 100%; top: 50%; border-radius: 0 50% 50% 50%;}\n  50% {left: 50%; top: 100%; border-radius: 50% 0 50% 50%;}\n  75% {left: 0%; top: 50%; border-radius: 50% 50% 0 50%; }\n  100% {left: 50%; top: 0px; border-radius: 50% 50% 50% 0;}\n\n`;\n\nconst LoaderWidget1 = styled.div`\n  width: 20px;\n  height: 20px;\n  background: #fff;\n  position: relative;\n  animation: ${loading};\n  animation-duration: 1.8s;\n  animation-iteration-count: infinite;\n  animation-fill-mode: forwards;\n  animation-timing-function: linear;\n  transform: translateX(-50%);\n`;\n\nconst LoaderWidget2 = styled(LoaderWidget1)`\n  transform: translateY(-100%) translateX(-50%);\n  animation-delay: -0.9s;\n`;\n\nconst Loader = () => {\n  return (\n    <div\n      style={{\n        width: \"200px\",\n        position: \"fixed\",\n        bottom: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%)\",\n        textAlign: \"center\",\n      }}\n    >\n      <div\n        style={{\n          width: \"80px\",\n          height: \"80px\",\n          margin: \"auto\",\n        }}\n      >\n        <LoaderWidget1 />\n        <LoaderWidget2 />\n      </div>\n      <div style={{ marginTop: \"40px\", fontSize: \"1.4rem\" }}>\n        <span>Working on it...</span>\n      </div>\n    </div>\n  );\n};\n\nexport default Loader;\n","import React, { useEffect, useRef } from \"react\";\n\nconst BarChart = ({ data, colours }) => {\n  const canvasRef = useRef(null);\n  const BAR_WIDTH = 60;\n  const BAR_GAP = 10;\n  const MAX_VALUE = 30;\n  const LABEL_PADDING = 30;\n\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext(\"2d\");\n\n    generateChart(ctx);\n  }, [data]);\n\n  const generateChart = (ctx) => {\n    clearCanvas(ctx);\n    const chartWidth = BAR_GAP + (BAR_WIDTH + BAR_GAP) * data.length;\n    const chartHeight = canvasRef.current.height - LABEL_PADDING;\n    ctx.font = \".9rem arial\";\n    ctx.fontWeight = \"400\";\n    ctx.fillStyle = \"#fff\";\n    ctx.strokeStyle = \"#fff\";\n    ctx.textAlign = \"right\";\n\n    // Draw X Axis\n    ctx.beginPath();\n    ctx.moveTo(LABEL_PADDING, chartHeight + 1);\n    ctx.lineTo(chartWidth + 25, chartHeight + 1);\n    ctx.stroke();\n\n    // Draw Y Axis\n    ctx.beginPath();\n    ctx.moveTo(LABEL_PADDING, 1);\n    ctx.lineTo(LABEL_PADDING, chartHeight);\n    ctx.stroke();\n\n    // Draw Y values\n    for (let i = 1; i >= 0; i -= 0.15) {\n      const value = Math.round(MAX_VALUE * i);\n      const valueY = chartHeight - chartHeight * i;\n      ctx.fillText(value, 25, valueY);\n    }\n\n    // Draw bars\n    let accum = BAR_GAP + LABEL_PADDING;\n    data.forEach((obj) => {\n      drawBar(ctx, chartHeight, accum, obj);\n      accum += BAR_WIDTH + BAR_GAP;\n    });\n  };\n\n  const drawBar = (ctx, chartHeight, accum, obj) => {\n    const canvas = canvasRef.current;\n    const barProportion = (obj.value / MAX_VALUE) * 100;\n    const barHeight = (barProportion / 100) * chartHeight;\n    const rectX = accum;\n    const rectY = canvas.height - (barHeight + LABEL_PADDING);\n\n    // Draw bar\n    ctx.fillStyle = colours[obj.label];\n    ctx.fillRect(rectX, rectY, BAR_WIDTH, barHeight);\n\n    // Draw labels\n    const labelX = rectX + BAR_WIDTH / 2;\n    const labelY = rectY + barHeight + 20;\n\n    ctx.textAlign = \"center\";\n    ctx.fillStyle = \"#fff\";\n    ctx.fillText(`${obj.label}`, labelX, labelY);\n  };\n\n  const clearCanvas = (ctx) => {\n    const canvas = canvasRef.current;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  return <canvas ref={canvasRef} width=\"520\" height=\"400\"></canvas>;\n};\n\nexport default BarChart;\n","import React, { useCallback } from \"react\";\nimport BarChart from \"../charts/BarChart\";\nimport Table from \"../charts/Table\";\nimport DataContainer from \"../layout/DataContainer\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst barColours = {\n  no: \"#79db88\",\n  no2: \"#ffb555\",\n  o3: \"#a8d6ff\",\n  so2: \"#00abff\",\n  pm2_5: \"#443636\",\n  pm10: \"#5de6c6\",\n  nh3: \"#e65d5d\",\n};\n\nconst airIndex = {\n  1: \"Good\",\n  2: \"Fair\",\n  3: \"Moderate\",\n  4: \"Poor\",\n  5: \"Very Poor\",\n};\n\nconst pollutantIndex = {\n  co: \"Carbon monnoxide\",\n  no: \"Nitrous oxide\",\n  no2: \"Nitrous dioxide\",\n  o3: \"Ozone\",\n  so2: \"Sulphur dioxide\",\n  pm2_5: \"Fine particulates\",\n  pm10: \"Coarse particulates\",\n  nh3: \"Ammonia\",\n};\n\nconst enterLeft = keyframes`\n  0% {margin-right: -100vw;}\n  100% {margin: 0;} \n`;\n\nconst PollutionWrapper = styled.section`\n  border-top: 1px solid #fff;\n  padding: 0.5rem 0;\n  animation: ${enterLeft};\n  animation-duration: 0.5s;\n  animation-iteration-count: 1;\n  animation-timing-function: ease;\n`;\n\nconst PollutionData = ({ data }) => {\n  const chartData = useCallback(() => {\n    return Object.keys(data.components)\n      .filter((key) => key !== \"co\" && key !== \"o3\")\n      .map((key) => ({\n        label: key,\n        value: data.components[key],\n      }))\n      .sort((a, b) => a.value < b.value);\n  }, [data]);\n\n  const tableData = useCallback(() => {\n    return Object.entries(data.components).map(([pollutant, value]) => [\n      pollutantIndex[pollutant],\n      value,\n    ]);\n  }, [data]);\n\n  return (\n    <PollutionWrapper>\n      <header style={{ textAlign: \"center\" }}>\n        <h3>Pollution Overview</h3>\n        <p>\n          Air Quality Index: {`${data.main.aqi} (${airIndex[data.main.aqi]})`}\n        </p>\n      </header>\n      <DataContainer>\n        <BarChart data={chartData()} colours={barColours} />\n        <Table headings={[\"Pollutant\", \"μg/m³\"]} data={tableData()} />\n      </DataContainer>\n    </PollutionWrapper>\n  );\n};\n\nexport default PollutionData;\n","import React, { Fragment, useEffect, useState } from \"react\";\nimport services from \"./services/requests\";\nimport { GlobalStyle } from \"./GlobalStyle\";\nimport PostCodeForm from \"./components/PostCodeForm\";\nimport EnergyData from \"./components/energy-data/EnergyData\";\nimport Loader from \"./components/utils/Loader\";\nimport PollutionData from \"./components/pollution-data/PollutionData\";\n\nconst App = () => {\n  const [loading, setLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [energyData, setEnergyData] = useState();\n  const [pollutionData, setPollutionData] = useState();\n  const [locationData, setLocationData] = useState({\n    admin_district: \"\",\n    outcode: \"\",\n    latitude: \"\",\n    longitude: \"\",\n  });\n\n  useEffect(() => {\n    if (submitted) {\n      fetchData();\n    }\n  }, [submitted, locationData]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n\n      const { outcode, latitude, longitude } = locationData;\n\n      const [pollutionRes, energyRes] = await Promise.all([\n        services.fetchPollutionData(latitude, longitude),\n        services.fetchEnergeyData(outcode),\n      ]);\n\n      setEnergyData(energyRes);\n      setPollutionData(pollutionRes);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <GlobalStyle />\n      {loading && <Loader />}\n      <div style={{ maxWidth: \"1100px\", margin: \"auto\" }}>\n        <PostCodeForm\n          setLocationData={setLocationData}\n          setSubmitted={setSubmitted}\n        />\n        <div style={{ margin: \"140px auto 0 auto\" }}>\n          {!loading && (\n            <h2 style={{ marginLeft: \"1rem\" }}>\n              {locationData.admin_district}\n            </h2>\n          )}\n          {!loading && energyData && <EnergyData data={energyData} />}\n          {!loading && pollutionData && <PollutionData data={pollutionData} />}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}