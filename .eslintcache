[{"/home/paul/Documents/code/carbon-intensity/src/index.js":"1","/home/paul/Documents/code/carbon-intensity/src/App.js":"2","/home/paul/Documents/code/carbon-intensity/src/GlobalStyle.js":"3","/home/paul/Documents/code/carbon-intensity/src/components/PostCodeForm.js":"4","/home/paul/Documents/code/carbon-intensity/src/services/requests.js":"5","/home/paul/Documents/code/carbon-intensity/src/components/charts/PieChart.js":"6","/home/paul/Documents/code/carbon-intensity/src/components/charts/Table.js":"7","/home/paul/Documents/code/carbon-intensity/src/components/utils/Loader.js":"8","/home/paul/Documents/code/carbon-intensity/src/components/energy-data/EnergyData.js":"9","/home/paul/Documents/code/carbon-intensity/src/components/pollution-data/PollutionData.js":"10","/home/paul/Documents/code/carbon-intensity/src/components/charts/BarChart.js":"11"},{"size":197,"mtime":1611615110656,"results":"12","hashOfConfig":"13"},{"size":1896,"mtime":1611666851636,"results":"14","hashOfConfig":"13"},{"size":297,"mtime":1611662439329,"results":"15","hashOfConfig":"13"},{"size":1234,"mtime":1611606135031,"results":"16","hashOfConfig":"13"},{"size":1206,"mtime":1611670058308,"results":"17","hashOfConfig":"13"},{"size":1582,"mtime":1611662655166,"results":"18","hashOfConfig":"13"},{"size":603,"mtime":1611662826449,"results":"19","hashOfConfig":"13"},{"size":958,"mtime":1611662697289,"results":"20","hashOfConfig":"13"},{"size":1375,"mtime":1611671007961,"results":"21","hashOfConfig":"13"},{"size":980,"mtime":1611677150227,"results":"22","hashOfConfig":"13"},{"size":2209,"mtime":1611677561411,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1fctmcc",{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"26"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"26"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/paul/Documents/code/carbon-intensity/src/index.js",[],["49","50"],"/home/paul/Documents/code/carbon-intensity/src/App.js",["51"],"import React, { Fragment, useEffect, useState } from \"react\";\nimport services from \"./services/requests\";\nimport { GlobalStyle } from \"./GlobalStyle\";\nimport PostCodeForm from \"./components/PostCodeForm\";\nimport EnergyData from \"./components/energy-data/EnergyData\";\nimport Loader from \"./components/utils/Loader\";\nimport PollutionData from \"./components/pollution-data/PollutionData\";\n\nconst App = () => {\n  const [loading, setLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [energyData, setEnergyData] = useState();\n  const [pollutionData, setPollutionData] = useState();\n  const [locationData, setLocationData] = useState({\n    admin_district: \"\",\n    outcode: \"\",\n    latitude: \"\",\n    longitude: \"\",\n  });\n\n  useEffect(() => {\n    if (submitted) {\n      fetchData();\n    }\n  }, [submitted, locationData]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n\n      const { outcode, latitude, longitude } = locationData;\n\n      const [pollutionRes, energyRes] = await Promise.all([\n        services.fetchPollutionData(latitude, longitude),\n        services.fetchEnergeyData(outcode),\n      ]);\n\n      setEnergyData(energyRes);\n      setPollutionData(pollutionRes);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <GlobalStyle />\n      {loading && <Loader />}\n      <div style={{ width: \"1100px\", margin: \"auto\" }}>\n        <PostCodeForm\n          setLocationData={setLocationData}\n          setSubmitted={setSubmitted}\n        />\n        <div style={{ margin: \"auto\" }}>\n          <h2 style={{ marginLeft: \"1rem\" }}>{locationData.admin_district}</h2>\n          {energyData && <EnergyData data={energyData} />}\n          {pollutionData && <PollutionData data={pollutionData} />}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default App;\n","/home/paul/Documents/code/carbon-intensity/src/GlobalStyle.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/PostCodeForm.js",[],"/home/paul/Documents/code/carbon-intensity/src/services/requests.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/charts/PieChart.js",["52"],"import React, { useEffect, useRef } from \"react\";\n\nconst PieChart = ({ data, chartColours }) => {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext(\"2d\");\n    generatePie(ctx);\n  }, [data]);\n\n  const generatePie = (ctx) => {\n    clearCanvas(ctx);\n\n    let accum = 0;\n    data.forEach((obj) => {\n      drawSlice(ctx, accum, obj);\n      accum += obj.radians;\n    });\n  };\n\n  const drawSlice = (ctx, arcStart, obj) => {\n    const { label, perc, radians } = obj;\n    const canvas = canvasRef.current;\n    const [centerX, centerY] = [canvas.width / 2, canvas.height / 2];\n    const radius = (canvas.height / 2) * 0.75;\n    const arcEnd = arcStart + radians;\n\n    ctx.beginPath();\n    ctx.moveTo(centerX, centerY);\n    ctx.arc(centerX, centerY, radius, arcStart, arcEnd, false);\n    ctx.closePath();\n    ctx.fillStyle = chartColours[label];\n    ctx.fill();\n\n    const midPoint = arcStart + (arcEnd - arcStart) / 2;\n    const labelPos = radius * 1.1;\n    const labelX = centerX + labelPos * Math.cos(midPoint);\n    const labelY = centerY + labelPos * Math.sin(midPoint);\n\n    ctx.font = \".9rem arial\";\n    ctx.fontWeight = \"400\";\n    ctx.fillStyle = \"#fff\";\n    ctx.textAlign = labelX < centerX ? \"right\" : \"left\";\n    ctx.fillText(`${label}: ${perc}%`, labelX, labelY);\n  };\n\n  const clearCanvas = (ctx) => {\n    const canvas = canvasRef.current;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  return (\n    <div>\n      <canvas ref={canvasRef} width=\"520\" height=\"400\"></canvas>\n    </div>\n  );\n};\n\nexport default PieChart;\n","/home/paul/Documents/code/carbon-intensity/src/components/charts/Table.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/utils/Loader.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/energy-data/EnergyData.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/pollution-data/PollutionData.js",[],"/home/paul/Documents/code/carbon-intensity/src/components/charts/BarChart.js",["53"],{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":25,"column":6,"nodeType":"60","endLine":25,"endColumn":31,"suggestions":"61"},{"ruleId":"58","severity":1,"message":"62","line":9,"column":6,"nodeType":"60","endLine":9,"endColumn":12,"suggestions":"63"},{"ruleId":"58","severity":1,"message":"64","line":13,"column":6,"nodeType":"60","endLine":13,"endColumn":12,"suggestions":"65"},"no-native-reassign",["66"],"no-negated-in-lhs",["67"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","ArrayExpression",["68"],"React Hook useEffect has a missing dependency: 'generatePie'. Either include it or remove the dependency array.",["69"],"React Hook useEffect has a missing dependency: 'generateChart'. Either include it or remove the dependency array.",["70"],"no-global-assign","no-unsafe-negation",{"desc":"71","fix":"72"},{"desc":"73","fix":"74"},{"desc":"75","fix":"76"},"Update the dependencies array to be: [submitted, locationData, fetchData]",{"range":"77","text":"78"},"Update the dependencies array to be: [data, generatePie]",{"range":"79","text":"80"},"Update the dependencies array to be: [data, generateChart]",{"range":"81","text":"82"},[824,849],"[submitted, locationData, fetchData]",[232,238],"[data, generatePie]",[327,333],"[data, generateChart]"]